
<div ng-if="new_mode" class="module_wrapper zoom_fade">
  <div ng-click="toggleNewMode()" class="module_fader dimmer"></div>
  <div ng-if="new_mode" class="module">
    <header>
      <h1>Create new campaign</h1>
    </header>
    <div ng-switch on="new_mode_step" class="content_wrapper">
      <div ng-switch-when="one" class="step_one">
        <ul class="select">
          <li ng-click="chooseToDuplicate(false)" class="option"><i class="icon-spinner2 bg green"></i>Create New</li>
          <li ng-click="chooseToDuplicate(true); duplicate_mode = true" class="option"><i class="icon-flash bg orange"></i>Duplicate Existing </li>
        </ul>
      </div>
      <div ng-switch-when="two" class="step_two fade"> 
        <fieldset ng-if="duplicate_mode" class="duplicate">
          <div ng-click="toggleCampaignSelector()" class="select expandable">
            <div class="status push_right"><i ng-show="!show_campaign_options" class="icon-down-open"></i><i ng-show="show_campaign_options" class="icon-up-open"></i></div>
            <div ng-class="{highlighted : show_campaign_options, pristine : !campaign_to_duplicate}" class="selection"><i class="icon-ok"></i><span ng-if="campaign_to_duplicate" ng-bind="campaign_to_duplicate.title"></span><span ng-if="!campaign_to_duplicate">Choose a campaign</span></div>
            <ul ng-if="show_campaign_options" class="options select_dropdown">
              <li ng-repeat="campaign in campaignTitleList" ng-click="selectCampaignToDuplicate(campaign)" ng-class="{selected : campaign_to_duplicate.id == campaign.id}" class="option"><i class="icon-ok"></i><span ng-bind="campaign.title"></span></li>
            </ul>
          </div>
        </fieldset>
        <fieldset>
          <input type="text" placeholder="Type a title for the new campaign" ng-model="new_campaign_title"/>
        </fieldset>
        <fieldset> 
          <div ng-click="toggleHandleSelector()" class="select expandable">
            <div class="status push_right"><i ng-show="!show_handle_options" class="icon-down-open"></i><i ng-show="show_handle_options" class="icon-up-open"></i></div>
            <div ng-class="{highlighted : show_handle_options, pristine : !handle_to_use}" class="selection"><i class="icon-ok"></i><span ng-if="handle_to_use" ng-bind="handle_to_use.text"></span><span ng-if="!handle_to_use.text">Choose a handle</span></div>
            <ul ng-if="show_handle_options" class="options select_dropdown">
              <li ng-repeat="handle in handleList" ng-click="selectHandleToUse(handle)" ng-class="{selected : handle_to_use.id == handle.id}" class="option"><i class="icon-ok"></i><span ng-bind="handle.text"></span></li>
            </ul>
          </div>
        </fieldset>
        <div ng-if="!duplicate_mode" class="btnset action two_btns">
          <button ng-click="toggleNewMode()" type="button" class="btn">cancel</button>
          <button type="submit" ng-click="createCampaign(new_campaign_title, handle_to_use.id, is_local, new_campaign_locale, discoverable)" class="btn positive">Continue</button>
        </div>
        <div ng-if="duplicate_mode" class="btnset action two_btns">
          <button ng-click="toggleNewMode()" type="button" class="btn">cancel</button>
          <button type="button" ng-click="duplicateCampaign(new_campaign_title, campaign_to_duplicate.id, handle_to_use.id)" class="btn positive">Duplicate </button>
        </div>
      </div>
    </div>
  </div>
</div>
<header class="app_header">
  <button ng-click="toggleSidebar('right')" class="btn icon left hide_large"><i class="icon-menu"></i></button>
  <h1 ng-bind="accountId" class="center"></h1>
  <button ng-click="edit_mode || toggleNewMode()" ng-if="!new_mode" ng-hide="edit_mode" ng-class="{disabled: edit_mode}" class="btn right icon">
    <div class="icon-plus"></div>
  </button>
</header>
<div class="scroller_wrapper">
  <section class="scroller">
    <ul id="campaign_list" class="object-list">
      <li ng-repeat="campaign in campaignTitleList" ng-class="{selected : selected_campaigns.some(campaign.id)}" class="object-item">
        <hgroup><a href="#/account/{{accountId}}/campaign/{{campaign.id}}/conversations">
            <h2>@{{campaign.handle}}</h2>
            <h1>{{campaign.title}}</h1></a></hgroup>
        <div class="object-alerts">
          <div ng-if="campaign.newCounter != 0" ng-hide="edit_mode" ng-bind="campaign.newCounter" class="alert new_counter"></div>
        </div>
        <div class="list-checkbox">
          <button ng-click="selectCampaign('{{campaign.id}}', '{{accountId}}')" class="checkbox"><i class="icon-ok"></i></button>
        </div>
      </li>
    </ul>
    <button ng-if="archiveExists" ng-click="toggleArchived()" class="btn fadded full_width"><span ng-show="view_archived == true">hide archived</span><span ng-show="view_archived == false">view archived</span></button>
    <ul ng-show="view_archived == true" class="object-list">
      <li ng-repeat="campaign in archivedCampaignList">
        <button ng-click="unarchiveListItem(campaign, campaignList)" class="btn right">unarchive</button>
        <hgroup><a href="#/account/{{accountId}}/campaign/{{campaign.id}}/conversations">
            <h2>@{{campaign.handle}}</h2>
            <h1>{{campaign.title}}</h1></a></hgroup>
      </li>
    </ul>
    <div ng-if="edit_mode" class="dashboard_toolbar">
      <div class="button_item"><a href="{{view_link}}" ng-class="" class="btn">view</a></div>
      <div class="button_item">
        <button ng-class="{disabled: disable_single_edit_buttons}" ng-click="disable_single_edit_buttons || archiveListItem(selected_campaigns, campaignList)" class="btn">archive</button>
      </div>
    </div>
  </section>
</div>